<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ATS CV Review System</title>
<style>
  body {
    font-family: "Poppins", sans-serif;
    background: #f5f7fa;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }

  header {
    background-color: #004aad;
    color: #fff;
    width: 100%;
    text-align: center;
    padding: 20px;
    font-size: 1.5em;
    font-weight: 600;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }

  .eminent-media-link {
    margin-top: 10px;
    display: inline-block;
    padding: 10px 20px;
    background: #fff;
    color: #004aad;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    transition: 0.3s;
  }

  .eminent-media-link:hover {
    background: #e0e7ff;
  }

  .container {
    margin-top: 30px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    width: 90%;
    max-width: 650px;
    padding: 30px;
    text-align: center;
  }

  input[type="file"] {
    margin: 20px 0;
    padding: 10px;
    border: 2px dashed #004aad;
    border-radius: 8px;
    width: 100%;
    background: #f8faff;
    cursor: pointer;
  }

  button {
    background: #004aad;
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 8px;
    font-size: 1em;
    cursor: pointer;
    transition: 0.3s;
  }

  button:hover { background: #00347a; }

  #loading { display: none; margin-top: 20px; }
  .loader {
    border: 4px solid #f3f3f3;
    border-top: 4px solid #004aad;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 0 auto;
  }

  @keyframes spin { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);} }

  #result { margin-top: 30px; display: none; text-align: left; }
  .rating {
    font-size: 1.2em;
    font-weight: 600;
    color: #004aad;
    margin-bottom: 10px;
  }
  .feedback {
    background: #f1f5ff;
    border-left: 5px solid #004aad;
    padding: 15px;
    border-radius: 5px;
    white-space: pre-line;
  }
</style>
</head>
<body>
<header>
  ATS CV Review System By Eminent Media 
</header>
<!-- Eminent Media Link Tab -->
<a class="eminent-media-link" href="https://mtechconsult.github.io/EMINENT-MEDIA.-/" target="_blank">
  Eminent Media ‚Äî Click here to read more about Eminent Media
</a>

Note:
Ensure to upload your CV as a PDF for the best results and professional output.
A 70% ATS score is acceptable, but aiming for 80% or higher maximizes your chances of strong results during automated screening.
<div class="container">
  <h2>Upload Your CV for ATS Compliance Review</h2>
  <input type="file" id="cvFile" accept=".pdf, .docx" />
  <button id="reviewBtn">Review CV</button>

  <div id="loading">
    <div class="loader"></div>
    <p>Analyzing your CV for ATS compliance...</p>
  </div>

  <div id="result">
    <div class="rating"></div>
    <div class="feedback"></div>
  </div>
</div>

<!-- Libraries for file reading -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mammoth@1.4.21/mammoth.browser.min.js"></script>

<script>
document.getElementById("reviewBtn").addEventListener("click", async () => {
  const fileInput = document.getElementById("cvFile");
  const file = fileInput.files[0];
  const loading = document.getElementById("loading");
  const result = document.getElementById("result");
  const ratingDiv = document.querySelector(".rating");
  const feedbackDiv = document.querySelector(".feedback");

  if (!file) {
    alert("Please upload a PDF or DOCX CV first.");
    return;
  }

  result.style.display = "none";
  loading.style.display = "block";

  let text = "";

  if (file.name.endsWith(".pdf")) {
    text = await extractTextFromPDF(file);
  } else if (file.name.endsWith(".docx")) {
    text = await extractTextFromDocx(file);
  } else {
    alert("Unsupported file format.");
    loading.style.display = "none";
    return;
  }

  const scoreData = analyzeCVText(text);
  loading.style.display = "none";
  result.style.display = "block";
  ratingDiv.innerHTML = `ATS Compliance Score: ${scoreData.score}%`;
  feedbackDiv.innerHTML = scoreData.feedback;
});

// Extract text from PDF
async function extractTextFromPDF(file) {
  const arrayBuffer = await file.arrayBuffer();
  const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
  let text = "";
  for (let i = 1; i <= pdf.numPages; i++) {
    const page = await pdf.getPage(i);
    const content = await page.getTextContent();
    const strings = content.items.map(item => item.str);
    text += strings.join(" ") + "\n";
  }
  return text;
}

// Extract text from DOCX
async function extractTextFromDocx(file) {
  const arrayBuffer = await file.arrayBuffer();
  const result = await mammoth.extractRawText({ arrayBuffer });
  return result.value;
}

// Simple ATS analyzer
function analyzeCVText(text) {
  text = text.toLowerCase();
  const totalWords = text.split(/\s+/).length;

  const keywords = [
    "experience","education","skills","project","achievements","certifications",
    "leadership","team","management","communication","python","excel","marketing",
    "finance","sales","strategy","customer","design","analysis","data"
  ];
  
  const keywordHits = keywords.filter(k => text.includes(k)).length;
  const keywordScore = Math.min((keywordHits / keywords.length) * 100, 100);

  const hasSections = ["education","experience","skills","summary"].filter(s => text.includes(s)).length;
  const structureScore = (hasSections / 4) * 100;

  const bulletPoints = (text.match(/‚Ä¢|- /g) || []).length;
  const formattingScore = Math.min((bulletPoints / 10) * 100, 100);

  const wordCountScore = totalWords >= 250 && totalWords <= 800 ? 100 : 60;

  const totalScore = Math.round((keywordScore * 0.4) + (structureScore * 0.3) + (formattingScore * 0.2) + (wordCountScore * 0.1));

  let feedback = `üßæ File analyzed successfully.\n\n`;
  feedback += `üìÑ Word count: ${totalWords}\n`;
  feedback += `üß† Keywords found: ${keywordHits} / ${keywords.length}\n\n`;
  
  if (keywordScore < 60) feedback += "üîπ Add more job-related keywords.\n";
  if (structureScore < 70) feedback += "üîπ Include clear sections like Education, Experience, and Skills.\n";
  if (formattingScore < 50) feedback += "üîπ Use bullet points to highlight key achievements.\n";
  if (wordCountScore < 80) feedback += "üîπ Ensure your CV length is between 1-2 pages.\n";
  if (totalScore >= 80) feedback += "\n‚úÖ Excellent Match! Your CV aligns strongly with the job description.
You have a high chance of passing automated screening and moving directly to the recruiter‚Äôs review stage.
Keep up the strong structure and keyword relevance.
                         .";
  else if (totalScore >= 70) feedback += "\n‚öôÔ∏è Good Match! Just a few improvements needed. Your CV meets most ATS requirements but needs a few updates.
Improving your keywords, formatting, and job-specific alignment will strengthen your visibility during screening.
A quick revision can boost your chances significantly.";
  else feedback += "\nüöÄ Needs improvement. Consider optimizing formatting and keywords.";

  return { score: totalScore, feedback };
}
</script>
</body>
</html>
